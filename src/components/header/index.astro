---
import Logo from '../logo/index.astro'
import {generate_rel_link} from '~/utils/links'
---

<div class="header">
    <div class="container xxl">
        <header class="navbar">
            <div class="left">
                <ul class="nav horizontal">
                    <li class="item">
                        <Logo class="link"/>
                    </li>
                    <li class="item">
                        <a href={generate_rel_link(Astro,
                            './docs/1.0/en/getting-started/introduction')}
                           class="link"
                           target="_self" aria-label="Components">
                            Components
                        </a>
                    </li>
                    <li class="item">
                        <a href={generate_rel_link(Astro,
                            './examples/1.0/en/welcome')} class="link"
                           target="_self"
                           aria-label="Pre-built Sections">
                            Pre-built Sections
                        </a>
                    </li>
                </ul>
            </div>
            <div class="right">
                <ul class="nav horizonatal">
                    <li class="item">
                        <a
                                href="https://github.com/nulllogic/xiigrid"
                                class="link"
                                target="_blank"
                        >
                            <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="20"
                                    height="20"
                                    role="img"
                                    viewBox="0 0 16 16"
                            >
                                <title>GitHub</title>
                                <path
                                        fill="currentColor"
                                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"
                                ></path>
                            </svg>
                        </a>
                    </li>
                    <li class="item">
                        <a
                                href="https://github.com/nulllogic/xiigrid"
                                class="link toggle_mode"
                                target="_blank"
                        >
                            <svg class="white" width="22px" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                      d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path>
                            </svg>
                            <svg class="dark" width="22px" viewBox="0 0 18.8 18.9">
                                <path stroke-linejoin="round"
                                      d="M5.4,5.6c0,4.1,3.4,7.5,7.5,7.5s2-.2,2.9-.6c-1.1,2.7-3.8,4.6-6.9,4.6S1.4,13.8,1.4,9.6,3.3,3.9,6,2.7c-.4.9-.6,1.9-.6,2.9Z"/>
                                <path stroke-linejoin="round"
                                      d="M11.2,2.1v-1c.1,0,.3,1,.3,1,0,.4.4.8.8.8h1c0,.1-1,.3-1,.3-.4,0-.8.4-.8.8v1c-.1,0-.3-1-.3-1,0-.4-.4-.8-.8-.8h-1c0-.1,1-.3,1-.3.4,0,.8-.4.8-.8Z"/>
                                <path stroke-linejoin="round"
                                      d="M15.2,7.1v-1c.1,0,.3,1,.3,1,0,.4.4.8.8.8h1c0,.1-1,.3-1,.3-.4,0-.8.4-.8.8v1c-.1,0-.3-1-.3-1,0-.4-.4-.8-.8-.8h-1c0-.1,1-.3,1-.3.4,0,.8-.4.8-.8Z"/>
                            </svg>
                        </a>
                    </li>
                </ul>
            </div>
        </header>
    </div>
</div>

<style lang="scss">

  @use "sass:list";
  @use "sass:string";
  @use "sass:meta";
  @use "sass:map";

  @use "~/styles/app.scss" as app;

  @use "~/styles/scss/mixins.scss" as mixins;
  @use "~/styles/scss/functions.scss" as functions;

  $header-section: (
      background: var(--background),
      box-shadow: var(--shadow),
      border-bottom: var(--border),
    /***/
      padding: 5px 5px,
      top: 0,
      position: relative,
      z-index: 6,
    /***/
      _colors: (
          light : (
              background : string.unquote('linear-gradient(rgba(216, 216, 216, 0.79), rgba(55, 241, 14, 0.09))'),
              border : 1px solid rgba(232, 244, 229, 1),
              shadow: 0 1px 2px #00000026,
          ),
          dark : (
              background : string.unquote('linear-gradient(rgba(10, 34, 8, 0.85) 0%, rgba(28, 43, 31, 0.55) 100%)'),
              border : 1px solid rgba(27, 60, 24, 1),
              shadow : 0 1px 2px #00000026,
          )
      ),
    /***/
      _subclasses : (
          '.navbar' : (
              --navbar-grid-template-columns: auto auto,
            /***/
              _subclasses : (
                  '.left .nav' :(
                      --nav-gap : 15px,
                  ),
                  '.right .nav' : (
                      --nav-gap : .825rem,
                  ),
                  '.item' : (
                    /***/
                      _subclasses: (
                          "&:first-child .title" : (
                              padding: 0
                          ),
                          '.link' : (
                              _subclasses: (
                                  '.white' : (
                                      display: var(--icon-display),
                                      _colors: (
                                          light : (
                                              icon-display: none,
                                          ),
                                          dark : (
                                              icon-display: inline-block
                                          )
                                      )
                                  ),
                                  '.dark' : (
                                      display: var(--icon-display),
                                      _colors: (
                                          light : (
                                              icon-display: inline-block
                                          ),
                                          dark : (
                                              icon-display: none,
                                          )
                                      )
                                  ),
                              )
                          )
                      )
                  )
              )
          ),
          '&.sticky' : (
              position: sticky,
              -webkit-backdrop-filter: blur(10px),
              backdrop-filter: blur(10px),
          )
      ),
    /***/
      _responsive : (
          md : (
              padding: 5px 5px,
          )
      ),
  );

  @include mixins.generate-component(
          $header-section,
          'header',
          app.$config,
          app.$theme,
          (add_pseudo_tag: false)
  );
</style>

<script type="text/javascript">
    const nav = document.querySelector('.header')
    const navTop = nav.offsetTop

    function stickyNavigation() {
        if (window.scrollY > navTop) {
            // nav offsetHeight = height of nav
            nav.classList.add('sticky')
        } else {
            nav.classList.remove('sticky')
        }
    }

    window.addEventListener('scroll', stickyNavigation)
</script>

<script>

    document.querySelector('.toggle_mode').addEventListener('click', (e) => {
        e.preventDefault();
        const current_theme = document.documentElement.getAttribute('data-theme');
        const new_theme = current_theme === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', new_theme);
        localStorage.setItem('theme', new_theme);
        const event = new CustomEvent('theme_change', {
            detail: {
                theme: new_theme
            }
        });
        document.dispatchEvent(event);
    })

</script>